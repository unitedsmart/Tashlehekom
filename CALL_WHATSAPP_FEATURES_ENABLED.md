# ๐ ุชูุนูู ููุฒุงุช ุงูุงุชุตุงู ูุงููุงุชุณุงุจ

## ๐ฏ **ููุฎุต ุงูุชุญุฏูุซ:**
ุชู ุชูุนูู ููุฒุงุช ุงูุงุชุตุงู ูุงููุงุชุณุงุจ ูู ุงูุชุทุจูู ุจุฏูุงู ูู ุฑุณุงูุฉ "ุณุชููู ูุชุงุญุฉ ูุฑูุจุงู".

---

## โ **ูุง ุชู ุฅูุฌุงุฒู:**

### **1. ุชูุนูู ููุฒุฉ ุงูุงุชุตุงู ุงููุจุงุดุฑ**
- โ **ุฅุถุงูุฉ ููุชุจุฉ url_launcher** ูู pubspec.yaml
- โ **ุฏุงูุฉ getUserById** ูู DatabaseService ููุญุตูู ุนูู ุจูุงูุงุช ุงูุจุงุฆุน
- โ **ุชูุนูู _makePhoneCall** ูุน ูุนุงูุฌุฉ ุดุงููุฉ ููุฃุฎุทุงุก
- โ **ุฏุนู ุฃุฑูุงู ุงูููุงุชู** ุจุตูุบ ูุฎุชููุฉ (0501234567 ู +966501234567)

### **2. ุชูุนูู ููุฒุฉ ุงููุงุชุณุงุจ**
- โ **ุชูุนูู _openWhatsApp** ูุน ุฑุณุงุฆู ูุฎุตุตุฉ
- โ **ุชูุณูู ุฃุฑูุงู ุงูููุงุชู** ูููุงุชุณุงุจ (ุฅุฒุงูุฉ ุงูุตูุฑ ูุฅุถุงูุฉ ุฑูุฒ ุงูุจูุฏ)
- โ **ุฑุณุงุฆู ุชููุงุฆูุฉ** ุชุชุถูู ูุนูููุงุช ุงูุณูุงุฑุฉ
- โ **ูุชุญ ุงููุงุชุณุงุจ ุฎุงุฑุฌูุงู** ุจุงุณุชุฎุฏุงู LaunchMode.externalApplication

### **3. ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก ูุงูุฃูุงู**
- โ **mounted checks** ูุชุฌูุจ ุงุณุชุฎุฏุงู BuildContext ุจุนุฏ dispose
- โ **ูุนุงูุฌุฉ ุดุงููุฉ ููุฃุฎุทุงุก** ูุน ุฑุณุงุฆู ูุงุถุญุฉ ูููุณุชุฎุฏู
- โ **ุงูุชุญูู ูู ูุฌูุฏ ุงูุจูุงูุงุช** ูุจู ูุญุงููุฉ ุงูุงุชุตุงู

---

## ๐ง **ุงูุชูุงุตูู ุงูุชูููุฉ:**

### **ุงููููุงุช ุงููุญุฏุซุฉ:**

#### **1. pubspec.yaml**
```yaml
# ุชู ุชูุนูู ููุชุจุฉ url_launcher
url_launcher: ^6.2.1
```

#### **2. lib/services/database_service.dart**
```dart
// ุฅุถุงูุฉ ุฏุงูุฉ ุฌุฏูุฏุฉ ููุญุตูู ุนูู ุงููุณุชุฎุฏู ุจุงููุนุฑู
Future<UserModel?> getUserById(String userId) async {
  final db = await instance.database;
  final maps = await db.query(
    'users',
    where: 'id = ?',
    whereArgs: [userId],
  );

  if (maps.isNotEmpty) {
    return UserModel.fromMap(maps.first);
  }
  return null;
}
```

#### **3. lib/screens/car/car_details_screen.dart**
```dart
// ุชูุนูู ุฏุงูุฉ ุงูุงุชุตุงู
Future<void> _makePhoneCall(String sellerId) async {
  try {
    final seller = await DatabaseService.instance.getUserById(sellerId);
    
    if (!mounted) return;
    
    if (seller != null && seller.phoneNumber.isNotEmpty) {
      final phoneNumber = seller.phoneNumber;
      final uri = Uri.parse('tel:$phoneNumber');

      if (await canLaunchUrl(uri)) {
        await launchUrl(uri);
      } else {
        // ุฑุณุงูุฉ ุฎุทุฃ
      }
    }
  } catch (e) {
    // ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก
  }
}

// ุชูุนูู ุฏุงูุฉ ุงููุงุชุณุงุจ
Future<void> _openWhatsApp(String sellerId) async {
  try {
    final seller = await DatabaseService.instance.getUserById(sellerId);
    
    if (!mounted) return;
    
    if (seller != null && seller.phoneNumber.isNotEmpty) {
      // ุชูุณูู ุฑูู ุงููุงุชู ูููุงุชุณุงุจ
      String phoneNumber = seller.phoneNumber;
      if (phoneNumber.startsWith('0')) {
        phoneNumber = '966${phoneNumber.substring(1)}';
      } else if (phoneNumber.startsWith('+966')) {
        phoneNumber = phoneNumber.substring(1);
      }
      
      final message = 'ูุฑุญุจุงูุ ุฃูุง ููุชู ุจุณูุงุฑุฉ ${widget.car.brand} ${widget.car.model}';
      final uri = Uri.parse(
        'https://wa.me/$phoneNumber?text=${Uri.encodeComponent(message)}',
      );

      if (await canLaunchUrl(uri)) {
        await launchUrl(uri, mode: LaunchMode.externalApplication);
      }
    }
  } catch (e) {
    // ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก
  }
}
```

---

## ๐ฑ **ููููุฉ ุนูู ุงูููุฒุงุช:**

### **1. ููุฒุฉ ุงูุงุชุตุงู:**
```
ุงููุณุชุฎุฏู ูุถุบุท ุนูู ุฒุฑ "ุงุชุตุงู"
โ
ุงูุชุทุจูู ูุญุตู ุนูู ุจูุงูุงุช ุงูุจุงุฆุน ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
โ
ูุณุชุฎุฑุฌ ุฑูู ุงููุงุชู
โ
ููุชุญ ุชุทุจูู ุงููุงุชู ูุน ุงูุฑูู ุฌุงูุฒ ููุงุชุตุงู
```

### **2. ููุฒุฉ ุงููุงุชุณุงุจ:**
```
ุงููุณุชุฎุฏู ูุถุบุท ุนูู ุฒุฑ "ูุงุชุณุงุจ"
โ
ุงูุชุทุจูู ูุญุตู ุนูู ุจูุงูุงุช ุงูุจุงุฆุน
โ
ููุณู ุฑูู ุงููุงุชู ูููุงุชุณุงุจ (966xxxxxxxxx)
โ
ููุดุฆ ุฑุณุงูุฉ ุชููุงุฆูุฉ ุชุชุถูู ูุนูููุงุช ุงูุณูุงุฑุฉ
โ
ููุชุญ ุงููุงุชุณุงุจ ูุน ุงูุฑุณุงูุฉ ุฌุงูุฒุฉ ููุฅุฑุณุงู
```

---

## ๐ฏ **ุฃุฑูุงู ุงูููุงุชู ุงููุชุงุญุฉ ููุงุฎุชุจุงุฑ:**

### **ุงููุณุชุฎุฏููู ุงูุชุฌุฑูุจููู:**
- **ุฃุญูุฏ ูุญูุฏ:** 0501234567
- **ุณุงุฑุฉ ุฃุญูุฏ:** 0507654321  
- **ูุญูุฏ ุนูู:** 0509876543
- **ูุงุทูุฉ ุฎุงูุฏ:** 0502468135
- **ุนุจุฏุงููู ุณุนุฏ:** 0508642097

### **ุงููุฏูุฑ ุงูุนุงู:**
- **ุงูุฑูู:** +966508423246
- **ุงูุจุฑูุฏ:** acc.ibrahim.arboud@gmail.com

---

## ๐ฆ **ููู APK ุงูุฌุฏูุฏ:**
- **ุงูุงุณู:** `TashlehekomV6-Call-WhatsApp-Enabled.apk`
- **ุงูุญุฌู:** ~20 MB
- **ุงูููุฒุงุช ุงูุฌุฏูุฏุฉ:** 
  - โ ุงูุงุชุตุงู ุงููุจุงุดุฑ ูุนูู
  - โ ุงููุงุชุณุงุจ ูุนูู ูุน ุฑุณุงุฆู ูุฎุตุตุฉ
  - โ ูุนุงูุฌุฉ ุดุงููุฉ ููุฃุฎุทุงุก

---

## ๐ **ููุงุฎุชุจุงุฑ:**

1. **ุงูุชุญ ุงูุชุทุจูู** ุนูู ุฌูุงู ุงูููุงูู
2. **ุงุฎุชุฑ ุฃู ุณูุงุฑุฉ** ูู ุงููุงุฆูุฉ ุงูุฑุฆูุณูุฉ
3. **ุงุถุบุท ุนูู "ุงุชุตุงู"** โ ูุฌุจ ุฃู ููุชุญ ุชุทุจูู ุงููุงุชู
4. **ุงุถุบุท ุนูู "ูุงุชุณุงุจ"** โ ูุฌุจ ุฃู ููุชุญ ุงููุงุชุณุงุจ ูุน ุฑุณุงูุฉ ุฌุงูุฒุฉ
5. **ุชุญูู ูู ุงูุฑุณุงูุฉ** โ ูุฌุจ ุฃู ุชุญุชูู ุนูู ูุนูููุงุช ุงูุณูุงุฑุฉ

---

**๐ ุงูุขู ููุฒุงุช ุงูุงุชุตุงู ูุงููุงุชุณุงุจ ุชุนูู ุจุดูู ูุงูู!**
